# Burndler Configuration Template
# Copy to .env and fill in values

# ====================
# Database Configuration
# ====================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=burndler
DB_USER=burndler
DB_PASSWORD=changeme
DB_SSL_MODE=disable

# Connection pool
DB_MAX_CONNECTIONS=25
DB_MAX_IDLE_CONNECTIONS=5
DB_CONNECTION_LIFETIME=300s

# ====================
# Storage Configuration
# ====================
# Choose storage mode: s3 or local
STORAGE_MODE=local

# S3 Storage (when STORAGE_MODE=s3)
S3_ENDPOINT=https://s3.amazonaws.com
S3_REGION=us-east-1
S3_BUCKET=burndler-artifacts
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_USE_SSL=true
S3_PATH_PREFIX=packages/

# Local FS Storage (when STORAGE_MODE=local)
LOCAL_STORAGE_PATH=/tmp/burndler/storage
LOCAL_STORAGE_MAX_SIZE=10GB

# ====================
# JWT Authentication
# ====================
# Generate secret: openssl rand -base64 32
JWT_SECRET=changeme-generate-secure-secret
JWT_ISSUER=burndler
JWT_AUDIENCE=burndler-api
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=168h

# ====================
# Server Configuration
# ====================
SERVER_PORT=8080
SERVER_HOST=0.0.0.0
SERVER_READ_TIMEOUT=30s
SERVER_WRITE_TIMEOUT=30s
SERVER_MAX_REQUEST_SIZE=100MB

# CORS settings
CORS_ALLOWED_ORIGINS=http://localhost:3000
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# Static Files
SERVE_STATIC_FILES=true
STATIC_FILES_PATH=../frontend/dist

# ====================
# Docker Registry
# ====================
DOCKER_REGISTRY_URL=https://registry-1.docker.io
DOCKER_REGISTRY_USERNAME=
DOCKER_REGISTRY_PASSWORD=
DOCKER_REGISTRY_CACHE_DIR=/tmp/docker-cache

# ====================
# Logging
# ====================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE_PATH=/var/log/burndler/api.log

# ====================
# Build Worker
# ====================
BUILD_WORKER_COUNT=4
BUILD_TIMEOUT=30m
BUILD_TEMP_DIR=/tmp/burndler-builds
BUILD_RETENTION_DAYS=7

# ====================
# Monitoring
# ====================
METRICS_ENABLED=false
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30s

# ====================
# Development Overrides
# ====================
# NODE_ENV=development
# REACT_APP_API_URL=http://localhost:8080/api/v1